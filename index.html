<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZALTA Digital Note</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-r from-indigo-500 to-purple-700 p-4">
  <main class="bg-white rounded-xl w-full max-w-md p-6 shadow-lg">
    <header class="text-center mb-6">
      <img src="images/images.png" alt="ZALTA Logo" class="mx-auto h-20 mb-4" />
      <h1 class="text-white text-2xl font-extrabold mb-1 bg-gradient-to-r from-indigo-500 to-purple-700 inline-block px-2 rounded">ZALTA</h1>
      <p class="text-white text-sm font-normal">Nota Penjualan</p>
    </header>

    <section class="mb-6 bg-gray-100 rounded-md p-4 text-gray-700 text-sm leading-relaxed">
      <h2 class="font-semibold mb-2 flex items-center gap-2 text-gray-800"><i class="fas fa-store"></i> Informasi </h2>
      <p class="font-semibold">ZALTA Store</p>
      <p>Tarub Tawangharjo</p>
      <p>Telp : 08816575574</p>
      <p>Email : -</p>
    </section>

    <form id="notaForm" class="space-y-4 mb-6" onsubmit="return false;">
      <div>
        <label for="nama-barang" class="block text-gray-700 font-semibold mb-1 flex items-center gap-2">
          <i class="fas fa-box"></i> Nama Barang:
        </label>
        <input type="text" id="nama-barang" autocomplete="off" placeholder="Masukkan nama barang..." class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-600" />
      </div>
      <div>
        <label for="nominal" class="block text-gray-700 font-semibold mb-1 flex items-center gap-2">
          <i class="fas fa-money-bill-wave"></i> Nominal (Rp):
        </label>
        <input type="number" id="nominal" min="0" step="any" autocomplete="off" placeholder="Masukkan harga..." class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-600" />
      </div>
      <button id="addBtn" type="submit" class="w-full bg-gradient-to-r from-indigo-500 to-purple-700 text-white font-semibold py-2 rounded-md flex items-center justify-center gap-2 hover:brightness-110 transition">
        <i class="fas fa-plus"></i> Tambah ke Nota
      </button>
    </form>

    <table class="w-full text-white text-sm mb-4 rounded-md overflow-hidden" id="notaTable">
      <thead>
        <tr>
          <th class="bg-gradient-to-r from-indigo-500 to-purple-700 px-3 py-2 text-left font-semibold rounded-l-md">No</th>
          <th class="bg-gradient-to-r from-indigo-500 to-purple-700 px-3 py-2 text-left font-semibold">Nama Barang</th>
          <th class="bg-gradient-to-r from-indigo-500 to-purple-700 px-3 py-2 text-left font-semibold">Nominal (Rp)</th>
          <th class="bg-gradient-to-r from-indigo-500 to-purple-700 px-3 py-2 text-left font-semibold rounded-r-md">Aksi</th>
        </tr>
      </thead>
      <tbody class="bg-white text-gray-900" id="notaBody"></tbody>
    </table>

    <div id="totalDisplay" class="bg-green-500 text-white font-semibold rounded-md py-2 px-4 mb-6 flex items-center justify-center gap-2">
      <i class="fas fa-receipt"></i> Total: Rp 0
    </div>

    <div class="grid grid-cols-3 gap-3 mb-3">
      <button id="savePdfBtn" type="button" class="bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-2 rounded-md flex items-center justify-center gap-2">
        <i class="fas fa-file-pdf"></i> Simpan PDF
      </button>
      <button id="resetBtn" type="button" class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-semibold py-2 rounded-md flex items-center justify-center gap-2">
        <i class="fas fa-sync-alt"></i> Reset
      </button>
      <button id="printBtn" type="button" class="bg-purple-700 hover:bg-purple-800 text-white font-semibold py-2 rounded-md flex items-center justify-center gap-2">
        <i class="fas fa-print"></i> Cetak
      </button>
    </div>

    <div class="grid grid-cols-2 gap-3">
      <button id="exportExcelBtn" type="button" class="bg-green-700 hover:bg-green-800 text-white font-semibold py-2 rounded-md flex items-center justify-center gap-2">
        <i class="fas fa-file-excel"></i> Excel
      </button>
      <button id="whatsappBtn" type="button" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-md flex items-center justify-center gap-2">
        <i class="fab fa-whatsapp"></i> WhatsApp
      </button>
    </div>

    <script>
      (() => {
        const form = document.getElementById('notaForm');
        const namaInput = document.getElementById('nama-barang');
        const nominalInput = document.getElementById('nominal');
        const tableBody = document.getElementById('notaBody');
        const totalDisplay = document.getElementById('totalDisplay');
        let items = [];

        function updateTable() {
          tableBody.innerHTML = '';
          let total = 0;
          items.forEach((item, index) => {
            total += item.nominal;
            const tr = document.createElement('tr');
            tr.className = 'border-b border-gray-200';
            tr.innerHTML = `
              <td class="px-3 py-2">${index + 1}</td>
              <td class="px-3 py-2">${item.nama}</td>
              <td class="px-3 py-2">Rp ${item.nominal.toLocaleString('id-ID')}</td>
              <td class="px-3 py-2">
                <button class="text-red-600 hover:text-red-800 font-semibold" data-index="${index}">Hapus</button>
              </td>
            `;
            tableBody.appendChild(tr);
          });
          totalDisplay.innerHTML = `<i class="fas fa-receipt"></i> Total: Rp ${total.toLocaleString('id-ID')}`;
        }

        function resetForm() {
          namaInput.value = '';
          nominalInput.value = '';
          namaInput.focus();
        }

        form.addEventListener('submit', () => {
          const nama = namaInput.value.trim();
          const nominal = parseFloat(nominalInput.value);
          if (!nama) return alert('Nama barang harus diisi.');
          if (isNaN(nominal) || nominal < 0) return alert('Nominal harus angka positif.');
          items.push({ nama, nominal });
          updateTable();
          resetForm();
        });

        tableBody.addEventListener('click', (e) => {
          if (e.target.tagName === 'BUTTON') {
            const index = parseInt(e.target.dataset.index);
            if (!isNaN(index)) {
              items.splice(index, 1);
              updateTable();
            }
          }
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
          if (confirm('Apakah Anda yakin ingin mereset semua data?')) {
            items = [];
            updateTable();
            resetForm();
          }
        });

        document.getElementById('printBtn').addEventListener('click', () => {
          if (items.length === 0) return alert('Tidak ada data untuk dicetak.');
          const total = items.reduce((a, b) => a + b.nominal, 0);
          const printWindow = window.open('', '', 'width=800,height=600');
          printWindow.document.write(`
            <html><head><title>Nota ZALTA</title>
            <style>
              body { font-family: Arial, sans-serif; padding: 30px; color: #333; }
              h1 { margin-bottom: 5px; }
              .info { margin-bottom: 20px; }
              table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              th, td { border: 1px solid #aaa; padding: 10px; text-align: left; }
              th { background-color: #6b46c1; color: white; }
              .total { font-weight: bold; font-size: 1.2em; }
            </style>
            </head><body>
            <h1>Nota ZALTA</h1>
            <div class="info">
              <p><strong>ZALTA Store</strong></p>
              <p>Jl. Contoh No. 123 Kota Anda</p>
              <p>Telp: 0812-3456-7890 | Email: info@zalta.com</p>
            </div>
            <table><thead><tr><th>No</th><th>Nama Barang</th><th>Nominal (Rp)</th></tr></thead><tbody>
              ${items.map((item, i) => `<tr><td>${i + 1}</td><td>${item.nama}</td><td>Rp ${item.nominal.toLocaleString('id-ID')}</td></tr>`).join('')}
            </tbody></table>
            <p class="total">Total: Rp ${total.toLocaleString('id-ID')}</p>
            </body></html>
          `);
          printWindow.document.close();
          printWindow.print();
        });

        document.getElementById('savePdfBtn').addEventListener('click', () => {
          document.getElementById('printBtn').click();
        });

        document.getElementById('exportExcelBtn').addEventListener('click', () => {
          if (items.length === 0) return alert('Tidak ada data untuk diekspor.');
          let csv = 'No,Nama Barang,Nominal (Rp)\n';
          items.forEach((item, i) => {
            csv += `${i + 1},"${item.nama}",${item.nominal}\n`;
          });
          const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
          const url = URL.createObjectURL(blob);
          const link = document.createElement('a');
          link.href = url;
          link.download = 'nota_zalta.csv';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        });

        document.getElementById('whatsappBtn').addEventListener('click', () => {
          if (items.length === 0) return alert('Tidak ada data untuk dikirim.');
          const total = items.reduce((a, b) => a + b.nominal, 0);
          let message = `*ðŸ§¾ Nota ZALTA*\nZALTA Store\nJl. Contoh No. 123\nTelp: 0812-3456-7890\n\n*Daftar Barang:*\n`;
          items.forEach((item, i) => {
            message += `${i + 1}. ${item.nama} - Rp ${item.nominal.toLocaleString('id-ID')}\n`;
          });
          message += `\n*Total: Rp ${total.toLocaleString('id-ID')}*`;
          const encodedMessage = encodeURIComponent(message);
          window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');
        });
      })();
    </script>
  </main>
</body>
</html>
